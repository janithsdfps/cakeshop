<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>miracle Cakes - Delectable Digital Storefront</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter and a display font for headings -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&family=Playfair+Display:wght@700;800&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" xintegrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />


    <!-- Custom CSS and Styling -->
    <style>
        /* Define color palette */
        :root {
            --bg-light-pink: #FFF5F7; /* Very light pink for backgrounds */
            --primary-pink: #F472B6; /* Main pink for accents */
            --dark-pink-text: #831843; /* Dark pink for text */
            --hover-pink: #EC4899; /* Hover pink */
            --whatsapp-green: #25D366;
        }

        /* Applying custom fonts */
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-light-pink);
            color: var(--dark-pink-text);
        }
        h1, h2, h3, h4, .font-display {
            font-family: 'Playfair Display', serif;
        }
        .font-brand {
            font-family: 'Dancing Script', cursive;
        }

        /* Hero Image Transition */
        #hero-images-container {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
        }
        #hero-images-container img {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }
        #hero-images-container img.active {
            opacity: 1;
        }


        /* Animation for elements fading in on scroll */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .reveal.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Styling for the custom cake builder */
        .step-indicator {
            transition: all 0.4s ease;
        }
        .step-indicator.active {
            background-color: var(--primary-pink);
            color: white;
            transform: scale(1.1);
        }
        .step-indicator.completed {
            background-color: var(--dark-pink-text);
            color: white;
        }
        
        /* Custom radio button styles */
        .custom-radio input[type="radio"] {
            display: none;
        }
        .custom-radio label {
            cursor: pointer;
            border: 2px solid #FBCFE8;
            transition: all 0.3s ease;
        }
        .custom-radio input[type="radio"]:checked + label {
            border-color: var(--primary-pink);
            background-color: #FFF;
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        
        /* Modal styles */
        #cart-modal, #checkout-modal {
            background-color: rgba(0,0,0,0.5);
            transition: opacity 0.3s ease;
        }
        
        /* WhatsApp Button */
        .whatsapp-button {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background-color: var(--whatsapp-green);
            color: white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            box-shadow: 0 4px 14px rgba(0, 0, 0, 0.25);
            z-index: 50;
            transition: transform 0.3s ease;
        }
        .whatsapp-button:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Navigation Bar -->
    <nav class="bg-white/80 backdrop-blur-md sticky top-0 z-40 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <div class="flex-shrink-0">
                    <a href="#" class="text-5xl font-brand text-[var(--dark-pink-text)]">miracle Cakes</a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#home" class="text-gray-700 hover:text-[var(--primary-pink)] px-3 py-2 rounded-md text-sm font-medium">Home</a>
                        <a href="#gallery" class="text-gray-700 hover:text-[var(--primary-pink)] px-3 py-2 rounded-md text-sm font-medium">Gallery</a>
                        <a href="#custom" class="text-gray-700 hover:text-[var(--primary-pink)] px-3 py-2 rounded-md text-sm font-medium">Custom Cakes</a>
                        <a href="#story" class="text-gray-700 hover:text-[var(--primary-pink)] px-3 py-2 rounded-md text-sm font-medium">Our Story</a>
                        <a href="#contact" class="text-gray-700 hover:text-[var(--primary-pink)] px-3 py-2 rounded-md text-sm font-medium">Contact</a>
                    </div>
                </div>
                <div class="flex items-center">
                    <button id="cart-button" class="relative bg-[var(--dark-pink-text)] text-white p-2 rounded-full hover:bg-[var(--hover-pink)] transition">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        <span id="cart-count" class="absolute -top-1 -right-1 bg-[var(--primary-pink)] text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section with Image Transition -->
    <section id="home" class="relative h-[calc(100vh-80px)] min-h-[700px] flex items-center justify-center text-center text-white reveal">
        <div id="hero-images-container">
            <img src="./WhatsApp Image 2025-06-25 at 14.36.31_5fa8d436.jpg" alt="Signature Cake 1" class="active">
            <img src="./WhatsApp Image 2025-06-25 at 15.05.28_9e8c3769.jpg" alt="Signature Cake 2">
            <img src="./WhatsApp Image 2025-06-25 at 15.06.04_c76dea8f.jpg" alt="Signature Cake 3">
        </div>
        <div class="absolute inset-0 bg-black/40 z-10"></div>
        <div class="relative z-20 px-4">
            <h1 class="text-5xl md:text-7xl lg:text-8xl font-display font-bold mb-4 drop-shadow-lg">Baking Moments into Memories</h1>
            <p class="text-lg md:text-xl max-w-2xl mx-auto mb-8 drop-shadow-md">Exquisite, handcrafted cakes from the heart of Piliyandala, for your most cherished celebrations.</p>
            <a href="#custom" class="bg-[var(--primary-pink)] hover:bg-[var(--hover-pink)] text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 shadow-lg">Create Your Own miracle</a>
        </div>
    </section>
    
    <!-- Top Selling Cakes Section -->
    <section id="top-selling" class="py-20 md:py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center reveal">
                <h2 class="text-4xl md:text-5xl font-display font-bold text-[var(--dark-pink-text)]">Our Top Sellers</h2>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Loved by many, baked for you. Discover the favorites!</p>
            </div>
            <div id="top-selling-grid" class="mt-12 grid gap-8 md:grid-cols-2 lg:grid-cols-3">
                <!-- Top selling items will be injected by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Unique Product Spotlight Section -->
    <section id="spotlight" class="py-20 md:py-24">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
             <div class="grid md:grid-cols-2 gap-12 items-center reveal">
                <div class="reveal">
                    <video src="./Chocolate_Fudge_Cake_Video_Ready.mp4" 
                           autoplay loop muted playsinline 
                           class="rounded-lg shadow-xl w-full aspect-video object-cover">
                        Your browser does not support the video tag.
                    </video>
                </div>
                <div class="reveal">
                    <h3 class="text-lg font-semibold text-[var(--primary-pink)]">PRODUCT SPOTLIGHT</h3>
                    <h2 class="mt-2 text-4xl md:text-5xl font-display font-bold text-[var(--dark-pink-text)]">The Unicorn miracle</h2>
                    <p class="mt-6 text-lg text-gray-600">
                        Experience pure magic with our signature Unicorn miracle cake. Featuring layers of vibrant ribbon cake, filled with cloud-like vanilla buttercream, and adorned with a handcrafted golden horn and whimsical swirls of pastel frosting.
                    </p>
                    <p class="mt-4 text-2xl font-bold text-[var(--dark-pink-text)]">LKR 6,500</p>
                    <button data-id="spotlight-unicorn" class="add-to-cart-btn mt-6 bg-[var(--primary-pink)] hover:bg-[var(--hover-pink)] text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 shadow-lg">
                        Order The Magic
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Cake Gallery/Menu -->
    <section id="gallery" class="py-20 md:py-32 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center reveal">
                <h2 class="text-4xl md:text-5xl font-display font-bold text-[var(--dark-pink-text)]">Our Full Gallery</h2>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">A showcase of our most beloved creations, perfect for any occasion.</p>
            </div>
            <div id="cake-gallery-grid" class="mt-12 grid gap-8 md:grid-cols-2 lg:grid-cols-3">
                <!-- Cake items will be injected by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Custom Cake Builder -->
    <section id="custom" class="py-20 md:py-32">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center reveal">
                <h2 class="text-4xl md:text-5xl font-display font-bold text-[var(--dark-pink-text)]">The Creation Station</h2>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Become the artist. Design your perfect cake, step by delicious step.</p>
            </div>
            
            <div class="mt-12 reveal">
                <!-- Step Indicators -->
                <div class="flex justify-between items-center mb-8 border-b-2 border-gray-200 pb-4">
                    <div id="step-indicator-1" class="step-indicator active w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg">1</div>
                    <div class="flex-1 h-1 bg-gray-200"></div>
                    <div id="step-indicator-2" class="step-indicator w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-lg">2</div>
                    <div class="flex-1 h-1 bg-gray-200"></div>
                    <div id="step-indicator-3" class="step-indicator w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-lg">3</div>
                     <div class="flex-1 h-1 bg-gray-200"></div>
                    <div id="step-indicator-4" class="step-indicator w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center font-bold text-lg">4</div>
                </div>

                <form id="cake-builder-form">
                    <!-- Step 1: Base -->
                    <div id="step-1" class="step-content">
                        <h3 class="text-2xl font-bold font-display mb-6">Step 1: Choose Your Base</h3>
                        <div class="grid md:grid-cols-2 gap-8">
                            <div>
                                <h4 class="text-lg font-semibold mb-3">Size & Shape</h4>
                                <div class="space-y-4 custom-radio">
                                    <div><input type="radio" id="size-1" name="base_size" value="6-inch Round" data-price="3500" checked><label for="size-1" class="block p-4 rounded-lg border-2"><strong>6-inch Round</strong> (8-10 people) - LKR 3,500</label></div>
                                    <div><input type="radio" id="size-2" name="base_size" value="8-inch Round" data-price="5000"><label for="size-2" class="block p-4 rounded-lg border-2"><strong>8-inch Round</strong> (15-20 people) - LKR 5,000</label></div>
                                    <div><input type="radio" id="size-3" name="base_size" value="10-inch Square" data-price="7000"><label for="size-3" class="block p-4 rounded-lg border-2"><strong>10-inch Square</strong> (25-30 people) - LKR 7,000</label></div>
                                </div>
                            </div>
                            <div>
                                <h4 class="text-lg font-semibold mb-3">Flavor</h4>
                                <div class="space-y-4 custom-radio">
                                    <div><input type="radio" id="flavor-1" name="base_flavor" value="Classic Vanilla Bean" data-price="0" checked><label for="flavor-1" class="block p-4 rounded-lg border-2"><strong>Classic Vanilla Bean</strong></label></div>
                                    <div><input type="radio" id="flavor-2" name="base_flavor" value="Decadent Chocolate Fudge" data-price="500"><label for="flavor-2" class="block p-4 rounded-lg border-2"><strong>Decadent Chocolate Fudge</strong> (+LKR 500)</label></div>
                                    <div><input type="radio" id="flavor-3" name="base_flavor" value="Velvety Red Velvet" data-price="500"><label for="flavor-3" class="block p-4 rounded-lg border-2"><strong>Velvety Red Velvet</strong> (+LKR 500)</label></div>
                                    <div><input type="radio" id="flavor-4" name="base_flavor" value="Traditional Ribbon" data-price="250"><label for="flavor-4" class="block p-4 rounded-lg border-2"><strong>Traditional Ribbon</strong> (+LKR 250)</label></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Filling & Frosting -->
                    <div id="step-2" class="step-content hidden">
                        <h3 class="text-2xl font-bold font-display mb-6">Step 2: Select Filling & Frosting</h3>
                        <div class="grid md:grid-cols-2 gap-8">
                             <div>
                                <h4 class="text-lg font-semibold mb-3">Filling</h4>
                                <div class="space-y-4 custom-radio">
                                    <div><input type="radio" id="filling-1" name="filling" value="None" data-price="0" checked><label for="filling-1" class="block p-4 rounded-lg border-2"><strong>None</strong></label></div>
                                    <div><input type="radio" id="filling-2" name="filling" value="Chocolate Ganache" data-price="800"><label for="filling-2" class="block p-4 rounded-lg border-2"><strong>Chocolate Ganache</strong> (+LKR 800)</label></div>
                                    <div><input type="radio" id="filling-3" name="filling" value="Strawberry Compote" data-price="600"><label for="filling-3" class="block p-4 rounded-lg border-2"><strong>Strawberry Compote</strong> (+LKR 600)</label></div>
                                    <div><input type="radio" id="filling-4" name="filling" value="Salted Caramel" data-price="700"><label for="filling-4" class="block p-4 rounded-lg border-2"><strong>Salted Caramel</strong> (+LKR 700)</label></div>
                                </div>
                            </div>
                             <div>
                                <h4 class="text-lg font-semibold mb-3">Frosting</h4>
                                <div class="space-y-4 custom-radio">
                                    <div><input type="radio" id="frosting-1" name="frosting" value="Swiss Meringue Buttercream" data-price="0" checked><label for="frosting-1" class="block p-4 rounded-lg border-2"><strong>Swiss Meringue Buttercream</strong></label></div>
                                    <div><input type="radio" id="frosting-2" name="frosting" value="Cream Cheese Frosting" data-price="400"><label for="frosting-2" class="block p-4 rounded-lg border-2"><strong>Cream Cheese Frosting</strong> (+LKR 400)</label></div>
                                    <div><input type="radio" id="frosting-3" name="frosting" value="Fondant" data-price="1000"><label for="frosting-3" class="block p-4 rounded-lg border-2"><strong>Sleek Fondant</strong> (+LKR 1000)</label></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Design -->
                    <div id="step-3" class="step-content hidden">
                        <h3 class="text-2xl font-bold font-display mb-6">Step 3: Design Your Masterpiece</h3>
                         <div class="grid md:grid-cols-2 gap-8">
                            <div>
                                <h4 class="text-lg font-semibold mb-3">Decorations</h4>
                                <div class="space-y-4">
                                    <div class="flex items-center"><input type="checkbox" id="deco-1" name="decorations" value="Rainbow Sprinkles" data-price="300" class="h-4 w-4 rounded text-[var(--primary-pink)] focus:ring-[var(--primary-pink)]"><label for="deco-1" class="ml-2">Rainbow Sprinkles (+LKR 300)</label></div>
                                    <div class="flex items-center"><input type="checkbox" id="deco-2" name="decorations" value="Chocolate Drips" data-price="500" class="h-4 w-4 rounded text-[var(--primary-pink)] focus:ring-[var(--primary-pink)]"><label for="deco-2" class="ml-2">Chocolate Drips (+LKR 500)</label></div>
                                    <div class="flex items-center"><input type="checkbox" id="deco-3" name="decorations" value="Edible Pearls" data-price="600" class="h-4 w-4 rounded text-[var(--primary-pink)] focus:ring-[var(--primary-pink)]"><label for="deco-3" class="ml-2">Edible Pearls (+LKR 600)</label></div>
                                    <div class="flex items-center"><input type="checkbox" id="deco-4" name="decorations" value="Fresh Flowers" data-price="1500" class="h-4 w-4 rounded text-[var(--primary-pink)] focus:ring-[var(--primary-pink)]"><label for="deco-4" class="ml-2">Fresh Flowers (+LKR 1,500)</label></div>
                                </div>
                            </div>
                             <div>
                                <h4 class="text-lg font-semibold mb-3">Personalized Message</h4>
                                 <input type="text" id="cake-message" name="cake_message" class="w-full p-3 border-2 border-gray-200 rounded-lg focus:ring-[var(--primary-pink)] focus:border-[var(--primary-pink)]" placeholder="e.g., Happy Birthday!">
                                
                                <h4 class="text-lg font-semibold mb-3 mt-6">Inspiration Image (Optional)</h4>
                                <input type="file" id="cake-image" name="cake_image" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-[var(--bg-light-pink)] file:text-[var(--dark-pink-text)] hover:file:bg-[#fde8f1]">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Step 4: Review -->
                    <div id="step-4" class="step-content hidden">
                        <h3 class="text-2xl font-bold font-display mb-6">Step 4: Review Your Creation</h3>
                        <div id="review-summary" class="bg-white p-6 rounded-lg border-2 border-[var(--primary-pink)]">
                            <!-- Summary will be injected here -->
                        </div>
                    </div>
                </form>

                <!-- Navigation and Summary -->
                <div class="mt-10 flex flex-col md:flex-row items-center justify-between gap-6 bg-white p-4 rounded-lg shadow-lg sticky bottom-4">
                    <div class="flex items-center gap-4">
                        <button id="prev-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-full transition hidden">Previous</button>
                        <button id="next-btn" class="bg-[var(--dark-pink-text)] hover:bg-[var(--hover-pink)] text-white font-bold py-2 px-6 rounded-full transition">Next Step</button>
                    </div>
                    <div class="text-right">
                        <p class="text-gray-600">Total Price:</p>
                        <p id="total-price" class="text-3xl font-bold font-display text-[var(--dark-pink-text)]">LKR 3,500</p>
                    </div>
                    <button id="add-custom-cake-to-cart-btn" class="bg-[var(--primary-pink)] hover:bg-[var(--hover-pink)] text-white font-bold py-3 px-8 rounded-full text-lg transition shadow-md hidden w-full md:w-auto">Add to Cart</button>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Our Story -->
    <section id="story" class="bg-white py-20 md:py-32">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                <div class="reveal">
                    <img src="https://placehold.co/800x600/FFF5F7/831843?text=miracle+Cakes+Bakery"
                         onerror="this.onerror=null;this.src='https://placehold.co/800x600/cccccc/ffffff?text=Image+Not+Found';"
                         alt="miracle Cakes Bakery" class="rounded-lg shadow-xl w-full">
                </div>
                <div class="reveal">
                    <h2 class="text-4xl md:text-5xl font-display font-bold text-[var(--dark-pink-text)]">Our Story</h2>
                    <p class="mt-6 text-lg text-gray-600">
                        Who is behind the magic? Journey into the miracle Cakes workshop to learn about our founder's passion, our commitment to using the finest local and international ingredients, and the love we pour into every single order. We're not just bakers; we're cake artists.
                    </p>
                    <p class="mt-4 text-gray-600">
                        From humble beginnings in a Piliyandala kitchen, miracle Cakes was born out of a desire to create cakes that are as beautiful to look at as they are delicious to eat. We believe every celebration deserves a spectacular centerpiece, and we're honored to be a part of your special moments.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact & Delivery -->
    <section id="contact" class="py-20 md:py-32">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center reveal">
                <h2 class="text-4xl md:text-5xl font-display font-bold text-[var(--dark-pink-text)]">Get Your Fix</h2>
                <p class="mt-4 max-w-2xl mx-auto text-lg text-gray-600">Find us, get in touch, or learn about our delivery services.</p>
            </div>
            <div class="mt-12 grid md:grid-cols-2 gap-12 items-start reveal">
                <div>
                    <h3 class="text-2xl font-bold font-display mb-4">Our Location</h3>
                    <p class="text-gray-600 mb-2">123 Cake Lane, Piliyandala, Sri Lanka</p>
                    <p class="text-gray-600 mb-4">Open: Mon - Sat, 9:00 AM - 6:00 PM</p>
                    <div class="aspect-w-16 aspect-h-9 rounded-lg overflow-hidden shadow-lg">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d31692.93633842417!2d79.9099894085449!3d6.828574161706698!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3ae25a452f5348f5%3A0x232f2a7818987154!2sPiliyandala!5e0!3m2!1sen!2slk!4v1687950000000!5m2!1sen!2slk" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
                <div>
                    <h3 class="text-2xl font-bold font-display mb-4">Delivery Information</h3>
                    <p class="text-gray-600 mb-4">We deliver across Colombo and its suburbs. Delivery charges are calculated at checkout based on your location.</p>
                    <ul class="list-disc list-inside space-y-2 text-gray-600">
                        <li><strong>Colombo 1-15:</strong> LKR 500</li>
                        <li><strong>Suburbs (Dehiwala, Nugegoda, etc.):</strong> LKR 800</li>
                        <li><strong>Extended Suburbs (Moratuwa, Malabe):</strong> LKR 1200</li>
                    </ul>
                     <p class="text-sm mt-4 text-gray-500">Please allow a lead time of 48 hours for standard orders and 72 hours for custom cakes.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-[var(--dark-pink-text)] text-white">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8 text-center">
            <p class="font-brand text-4xl mb-2">miracle Cakes</p>
            <p>&copy; 2025 miracle Cakes. All Rights Reserved. Piliyandala, Sri Lanka.</p>
        </div>
    </footer>


    <!-- Shopping Cart Modal -->
    <div id="cart-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
        <div id="cart-modal-overlay" class="absolute inset-0 bg-black/50"></div>
        <div class="bg-white rounded-lg shadow-xl w-full max-w-lg relative max-h-[90vh] flex flex-col">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 class="text-2xl font-display font-bold">Your Cart</h3>
                <button id="close-cart-btn" class="text-gray-500 hover:text-gray-800 text-3xl">&times;</button>
            </div>
            <div id="cart-items" class="p-6 overflow-y-auto">
                <!-- Cart items will be injected here -->
                <p id="empty-cart-message" class="text-center text-gray-500">Your cart is empty.</p>
            </div>
            <div class="p-6 border-t mt-auto bg-gray-50">
                <div class="flex justify-between items-center font-bold text-lg">
                    <span>Total:</span>
                    <span id="cart-total">LKR 0</span>
                </div>
                <button id="checkout-btn" class="w-full mt-4 bg-[var(--primary-pink)] hover:bg-[var(--hover-pink)] text-white font-bold py-3 rounded-lg transition disabled:bg-gray-300">Proceed to Checkout</button>
            </div>
        </div>
    </div>
    
    <!-- Checkout Confirmation Modal -->
    <div id="checkout-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 hidden">
        <div id="checkout-modal-overlay" class="absolute inset-0 bg-black/50"></div>
        <div class="bg-white rounded-lg shadow-xl w-full max-w-md relative text-center p-8">
             <h3 class="text-2xl font-display font-bold mb-4">Thank You for Your Order!</h3>
             <p class="text-gray-600 mb-6">This is where the secure payment gateway (like PayHere) would be integrated. For now, consider your order placed for demonstration purposes.</p>
             <button id="close-checkout-btn" class="bg-[var(--dark-pink-text)] hover:bg-[var(--hover-pink)] text-white font-bold py-2 px-6 rounded-full transition">Close</button>
        </div>
    </div>
    
    <!-- WhatsApp Fixed Button -->
    <a href="https://wa.me/94771234567" target="_blank" class="whatsapp-button">
        <i class="fab fa-whatsapp"></i>
    </a>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA ---
            const cakeData = [
                { id: 1, name: 'Chocolate Paradise', price: 4500, img: './choclet paradise.png' },
                { id: 2, name: 'Strawberry Dream', price: 4200, img: './steberry.png' },
                { id: 3, name: 'Classic Red Velvet', price: 4800, img: './velvet cake.png' },
                { id: 4, name: 'Vegan Delight', price: 5200, img: './vegan.png' },
                { id: 5, name: 'Wedding Elegance', price: 15000, img: 'weding.png' },
                { id: 6, name: 'Birthday Funfetti', price: 4000, img: 'bd.png' },
            ];
            
            const spotlightProduct = { id: 'spotlight-unicorn', name: 'The Unicorn miracle', price: 6500, img: 'https://placehold.co/800x700/FBCFE8/831843?text=Unicorn+miracle+Cake' };
            
            let cart = [];
            let currentStep = 1;
            const totalSteps = 4;

            // --- ELEMENTS ---
            const galleryGrid = document.getElementById('cake-gallery-grid');
            const topSellingGrid = document.getElementById('top-selling-grid');
            const cartButton = document.getElementById('cart-button');
            const cartModal = document.getElementById('cart-modal');
            const closeCartBtn = document.getElementById('close-cart-btn');
            const cartModalOverlay = document.getElementById('cart-modal-overlay');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartCountEl = document.getElementById('cart-count');
            const cartTotalEl = document.getElementById('cart-total');
            const emptyCartMessage = document.getElementById('empty-cart-message');
            const checkoutBtn = document.getElementById('checkout-btn');
            
            const checkoutModal = document.getElementById('checkout-modal');
            const closeCheckoutBtn = document.getElementById('close-checkout-btn');
            const checkoutModalOverlay = document.getElementById('checkout-modal-overlay');

            const form = document.getElementById('cake-builder-form');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const totalPriceEl = document.getElementById('total-price');
            const addCustomCakeBtn = document.getElementById('add-custom-cake-to-cart-btn');

            // --- FUNCTIONS ---
            
             // Hero Section Image Slider
            function initHeroSlider() {
                const images = document.querySelectorAll('#hero-images-container img');
                let currentImageIndex = 0;
                setInterval(() => {
                    images[currentImageIndex].classList.remove('active');
                    currentImageIndex = (currentImageIndex + 1) % images.length;
                    images[currentImageIndex].classList.add('active');
                }, 5000); // Change image every 5 seconds
            }
            
            function createCakeCard(cake) {
                 return `
                    <div class="bg-white rounded-lg shadow-lg overflow-hidden group reveal">
                        <div class="relative">
                            <img src="${cake.img}" 
                                 onerror="this.onerror=null;this.src='https://placehold.co/600x400/cccccc/ffffff?text=Image+Missing';"
                                 alt="${cake.name}" class="w-full h-64 object-cover transform group-hover:scale-110 transition-transform duration-500">
                            <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
                        </div>
                        <div class="p-6">
                            <h3 class="text-xl font-bold font-display text-[var(--dark-pink-text)]">${cake.name}</h3>
                            <p class="mt-2 text-lg text-gray-700">LKR ${cake.price.toLocaleString()}</p>
                            <button data-id="${cake.id}" class="add-to-cart-btn mt-4 w-full bg-[var(--dark-pink-text)] hover:bg-[var(--hover-pink)] text-white font-bold py-2 px-4 rounded-full transition">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                `;
            }

            // Populate Galleries
            function populateGalleries() {
                galleryGrid.innerHTML = cakeData.map(createCakeCard).join('');
                // For demonstration, top sellers are the first 3 cakes
                topSellingGrid.innerHTML = cakeData.slice(0, 3).map(createCakeCard).join('');
            }

            // Shopping Cart Logic
            function addToCart(itemId, isCustom = false, customDetails = {}) {
                let itemToAdd;
                if (isCustom) {
                    itemToAdd = { ...customDetails, id: `custom-${Date.now()}`, quantity: 1, isCustom: true };
                } else if (itemId === 'spotlight-unicorn') {
                     itemToAdd = { ...spotlightProduct, quantity: 1 };
                } else {
                    itemToAdd = { ...cakeData.find(c => c.id === itemId), quantity: 1 };
                }
                
                const existingItem = cart.find(item => item.id === itemToAdd.id);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push(itemToAdd);
                }
                updateCart();
                animateCartButton();
            }
            
            function animateCartButton(){
                const cartIcon = document.querySelector('#cart-button svg');
                const confirmation = document.createElement('span');
                confirmation.textContent = '✓';
                confirmation.className = 'absolute inset-0 flex items-center justify-center text-white text-2xl font-bold opacity-0 transition-opacity duration-500';
                cartButton.appendChild(confirmation);
                
                cartIcon.style.transition = 'opacity 0.2s ease';
                cartIcon.style.opacity = '0';
                confirmation.style.opacity = '1';
                
                setTimeout(() => {
                    confirmation.style.opacity = '0';
                    cartIcon.style.opacity = '1';
                    setTimeout(()=> cartButton.removeChild(confirmation), 500);
                }, 1000);
            }

            function updateCart() {
                cartCountEl.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
                if (cart.length === 0) {
                    cartItemsContainer.innerHTML = '';
                    emptyCartMessage.style.display = 'block';
                    cartTotalEl.textContent = 'LKR 0';
                    checkoutBtn.disabled = true;
                } else {
                    emptyCartMessage.style.display = 'none';
                    cartItemsContainer.innerHTML = cart.map(item => `
                        <div class="flex items-center justify-between py-3 border-b last:border-b-0">
                            <div class="flex items-center gap-4">
                                <img src="${item.img || 'https://placehold.co/100x100/FFF5F7/831843?text=Custom'}" alt="${item.name}" class="w-16 h-16 rounded-md object-cover">
                                <div>
                                    <p class="font-bold">${item.name}</p>
                                    <p class="text-sm text-gray-500">LKR ${item.price.toLocaleString()}</p>
                                    ${item.isCustom ? `<p class="text-xs text-gray-500">${item.details}</p>` : ''}
                                </div>
                            </div>
                            <div class="flex items-center gap-3">
                                <p>Qty: ${item.quantity}</p>
                            </div>
                        </div>
                    `).join('');
                    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                    cartTotalEl.textContent = `LKR ${total.toLocaleString()}`;
                    checkoutBtn.disabled = false;
                }
            }
            
            function toggleCartModal() {
                if (cartModal.classList.contains('hidden')) {
                    cartModal.classList.remove('hidden');
                    setTimeout(() => cartModal.style.opacity = 1, 10);
                } else {
                    cartModal.style.opacity = 0;
                    setTimeout(() => cartModal.classList.add('hidden'), 300);
                }
            }
            
            function toggleCheckoutModal() {
                 if (checkoutModal.classList.contains('hidden')) {
                    checkoutModal.classList.remove('hidden');
                    setTimeout(() => checkoutModal.style.opacity = 1, 10);
                } else {
                    checkoutModal.style.opacity = 0;
                    setTimeout(() => checkoutModal.classList.add('hidden'), 300);
                }
            }

            // Cake Builder Logic
            function updateStep(newStep) {
                document.getElementById(`step-${currentStep}`).classList.add('hidden');
                document.getElementById(`step-indicator-${currentStep}`).classList.remove('active');
                if (currentStep < newStep) {
                   document.getElementById(`step-indicator-${currentStep}`).classList.add('completed'); 
                } else {
                   document.getElementById(`step-indicator-${newStep}`).classList.remove('completed');
                }
                
                currentStep = newStep;
                
                document.getElementById(`step-${currentStep}`).classList.remove('hidden');
                document.getElementById(`step-indicator-${currentStep}`).classList.add('active');

                prevBtn.classList.toggle('hidden', currentStep === 1);
                nextBtn.classList.toggle('hidden', currentStep === totalSteps);
                addCustomCakeBtn.classList.toggle('hidden', currentStep !== totalSteps);

                if (currentStep === totalSteps) {
                    generateReviewSummary();
                }
            }
            
            function calculateTotalPrice() {
                let total = 0;
                const baseSizeEl = form.querySelector('input[name="base_size"]:checked');
                if(baseSizeEl) total += parseFloat(baseSizeEl.dataset.price || 0);

                const baseFlavorEl = form.querySelector('input[name="base_flavor"]:checked');
                if(baseFlavorEl) total += parseFloat(baseFlavorEl.dataset.price || 0);

                const fillingEl = form.querySelector('input[name="filling"]:checked');
                if(fillingEl) total += parseFloat(fillingEl.dataset.price || 0);

                const frostingEl = form.querySelector('input[name="frosting"]:checked');
                if(frostingEl) total += parseFloat(frostingEl.dataset.price || 0);

                const decorationEls = form.querySelectorAll('input[name="decorations"]:checked');
                decorationEls.forEach(el => total += parseFloat(el.dataset.price || 0));

                totalPriceEl.textContent = `LKR ${total.toLocaleString()}`;
                return total;
            }
            
            function generateReviewSummary() {
                const summaryContainer = document.getElementById('review-summary');
                const selections = {
                    "Base": form.querySelector('input[name="base_size"]:checked')?.value,
                    "Flavor": form.querySelector('input[name="base_flavor"]:checked')?.value,
                    "Filling": form.querySelector('input[name="filling"]:checked')?.value,
                    "Frosting": form.querySelector('input[name="frosting"]:checked')?.value,
                    "Decorations": Array.from(form.querySelectorAll('input[name="decorations"]:checked')).map(el => el.value).join(', ') || 'None',
                    "Message": form.querySelector('#cake-message').value || 'None'
                };
                
                summaryContainer.innerHTML = Object.entries(selections).map(([key, value]) => `
                    <div class="flex justify-between py-2 border-b border-gray-200 last:border-0">
                        <strong class="text-gray-700">${key}:</strong>
                        <span class="text-right">${value}</span>
                    </div>
                `).join('');
            }

            // Scroll Animations
            function setupScrollAnimations() {
                const reveals = document.querySelectorAll('.reveal');
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, { threshold: 0.1 });

                reveals.forEach(el => observer.observe(el));
            }

            // --- EVENT LISTENERS ---
            document.body.addEventListener('click', (e) => {
                if (e.target.classList.contains('add-to-cart-btn')) {
                    const id = e.target.dataset.id;
                    const cake = cakeData.find(c => c.id == id);
                    if (cake) {
                        addToCart(cake.id);
                    } else if (id === 'spotlight-unicorn') {
                         addToCart('spotlight-unicorn');
                    }
                }
            });

            cartButton.addEventListener('click', toggleCartModal);
            closeCartBtn.addEventListener('click', toggleCartModal);
            cartModalOverlay.addEventListener('click', toggleCartModal);
            
            checkoutBtn.addEventListener('click', () => {
                if (cart.length > 0) {
                    toggleCartModal();
                    toggleCheckoutModal();
                    cart = [];
                    updateCart();
                }
            });
            
            closeCheckoutBtn.addEventListener('click', toggleCheckoutModal);
            checkoutModalOverlay.addEventListener('click', toggleCheckoutModal);
            
            nextBtn.addEventListener('click', () => { if (currentStep < totalSteps) updateStep(currentStep + 1); });
            prevBtn.addEventListener('click', () => { if (currentStep > 1) updateStep(currentStep - 1); });
            
            form.addEventListener('change', calculateTotalPrice);
            
            addCustomCakeBtn.addEventListener('click', () => {
                const price = calculateTotalPrice();
                const summary = {
                    "Base": form.querySelector('input[name="base_size"]:checked')?.value,
                    "Flavor": form.querySelector('input[name="base_flavor"]:checked')?.value,
                    "Message": form.querySelector('#cake-message').value
                };
                const detailsString = `${summary.Base}, ${summary.Flavor}${summary.Message ? `, Msg: "${summary.Message}"` : ''}`;
                addToCart(null, true, { name: "Custom Designed Cake", price: price, details: detailsString });
                toggleCartModal();
            });

            // --- INITIALIZATION ---
            initHeroSlider();
            populateGalleries();
            updateCart();
            calculateTotalPrice();
            setupScrollAnimations();
        });
    </script>
</body>
</html>
